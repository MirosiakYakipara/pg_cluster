# Описание
Кластер состоит из 3 контейнеров: Master, Slave, Arbiter

Раз в 5 секунд Master проверяет связи до слейва и до арбитра, если отсутствуют обе связи, то происходит блокировка всех входящих подключений на Master через iptables, путём изменения политики по умолчанию на DROP.

Раз в секунду Slave проверяет связи до мастера и от арбитра к мастеру, если отсутствуют обе связи, то проиходит промоут до Master, путем создания триггер файла.

# Запуск
Поднять кластер ```docker compose up```

# Тестирование кластера
Запустить тест ```python writer.py``` на локальной машине, не в контейнере!

При выполнении первого теста (В середине выполнения убиваем Slave)

- synchronous_commit = off: 0 потерь.
- synchronous_commit = remote_apply: 0 потерь.

При выполнении второго теста (В середине выполнения убиваем Master)

- synchronous_commit = off: 42 потери.
- synchronous_commit = remote_apply: 0 потерь.
